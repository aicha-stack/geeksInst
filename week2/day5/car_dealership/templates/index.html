{% extends "base.html" %}
{% block content %}
  <div class="container mx-auto mt-8">
     <form method="get" action="/" class="mb-6 flex">
    <input 
      type="text" 
      name="q" 
      placeholder="Search cars by model or description..." 
      value="{{ search_query or '' }}"
      class="flex-grow border p-2 rounded-l focus:outline-none"
    >
    <button type="submit" class="bg-pink-500 text-white px-4 rounded-r hover:bg-pink-600">
      Search
    </button>
  </form>
    <h2 class="text-xl font-semibold text-pink-600 mb-4">Available Cars</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
     {% for car in cars %}
      <div class="bg-white p-4 rounded shadow">
        <img src="{{ car.image }}" alt="{{ car.model }}" class="w-full h-48 object-cover rounded mb-4">
        <h3 class="text-lg font-bold text-pink-600">{{ car.model }}</h3>
         <p class="mt-2 text-gray-600">{{ car.description }}</p>
        <p class="mt-2 text-gray-700">${{ car.price }}</p>
        <a href="/delete/{{ car.id }}" 
       class="mt-2 inline-block bg-purple-500 text-gray-600 px-4 py-2 rounded hover:bg-purple-600"
       onclick="return confirm('Are you sure you want to delete this car?');">
       Delete</a>
       <a href="/edit/{{ car.id }}" class="mt-2 inline-block bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600">
   Edit</a>

        <a href="/details/{{ car.id }}" class="mt-4 inline-block bg-pink-400 text-white px-4 py-2 rounded hover:bg-pink-500">View Details</a>
      </div>
     {% else %}
      <p class="text-gray-600">No cars available.</p>
     {% endfor %}
    </div>
   {% if total_pages > 1 %}
   <div class="mt-6 flex justify-center space-x-2">
      {% if page > 1 %}
         <a href="/?page={{ page-1 }}" class="px-3 py-1 bg-pink-300 rounded hover:bg-pink-400">Previous</a>
      {% endif %}

      {% for p in range(1, total_pages+1) %}
         <a href="/?page={{ p }}" class="px-3 py-1 rounded {% if p==page %}bg-pink-500 text-white{% else %}bg-pink-200{% endif %} hover:bg-pink-400">{{ p }}</a>
      {% endfor %}

      {% if page < total_pages %}
         <a href="/?page={{ page+1 }}" class="px-3 py-1 bg-pink-300 rounded hover:bg-pink-400">Next</a>
      {% endif %}
    </div>
 {% endif %}

  </div>
  </div>
{% endblock %}
     
</body>
</html>

